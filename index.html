<!DOCTYPE html>
<html>
<head>
<style>
/* #canvas{
    position: absolute;
    left: 0px; top: 0px;
} */

</style>

</head>
<body>

<!-- <canvas id="canvas"></canvas> -->

<script>

    let w = window.innerWidth;
    let h = window.innerHeight;

    const snake = {
        setup: () => {
            const canvas = document.createElement("canvas");
            // style canvas
            canvas.style = "position: absolute; top: 0px; left: 0px";
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            // add element in body html tag
            document.body.appendChild(canvas);

            // get context, add to object
            snake.c = canvas.getContext("2d");
        },
        //c: this.setup(),
        x: 0,
        y: 0,
        dX: 1,
        dY: 0,
        size: 50,
        speed: 5,
        move: () => {
            snake.x += snake.dX*snake.speed;
            snake.y += snake.dY*snake.speed;
            snake.check_border(snake.x, snake.y, snake.size);
        },
        check_border: (x,y,s) => {
            // check x
            if (x < -s) snake.x = w;
            if (x > w) snake.x = -s;

            // check y
            if (y < -s) snake.y = h;
            if (y > h) snake.y = -s;
        },
        render: (c) => {
            let x = snake.x;
            let y = snake.y;
            size = snake.size;
            snake.c.fillStyle = 'black';
            snake.c.fillRect(0,0,w,h);
            snake.c.fillStyle = `rgb(0,${50 + x * (155/w)},${150 + y * (105/h)})`
            snake.c.fillRect(x,y,size,size);
        },
    }

snake.setup();

    // CONTROLS
    window.addEventListener("keydown", (e) => {
        switch(e.key){
            case "ArrowLeft":
                snake.dX = -1;
                snake.dY = 0;
                break;
            case "ArrowUp":
                snake.dX = 0;
                snake.dY = -1;
                break;
            case "ArrowRight":
                snake.dX = 1;
                snake.dY = 0;
                break;
            case "ArrowDown":
                snake.dX = 0;
                snake.dY = 1;
        }
    })

    // const canvas = document.getElementById("canvas");
    // canvas.width = w;
    // canvas.height = h;
    // const c = canvas.getContext("2d");

    //c.fillRect(0,0,w,h);

    window.requestAnimationFrame(draw);

    function draw(){
        // clear screen
        // c.fillStyle = "black";
        // c.fillRect(0,0,w,h);

        // change position
        snake.move();

        // draw snake
        snake.render(snake.c);

        window.requestAnimationFrame(draw);
    }




    // for (let i = 0; i < w; i += 100){
    //     for (let j = 0; j < h; j += 100){
    //         c.fillStyle = `rgb(0,${50 + i * (155/w)},${150 + j * (105/h)})`
    //         c.fillRect(i,j,100,100)
    //     }
    // }



</script>

</body>
</html>
